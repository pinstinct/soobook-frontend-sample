<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Soobook</title>
  <link rel="stylesheet" href="../bower_components/bootstrap/dist/css/bootstrap.min.css">
</head>
<body>
  <div id="wrap">

    <div class="page-header">
      <h1>Soobook API Sample Call</h1>
    </div>

    <div class="list-group">
      <a href="#" id="signup-api" class="list-group-item list-group-item-success">Signup API</a>
      <a href="#" class="list-group-item list-group-item-success signup-api-result">Signup API Result</a>
      <a href="#" id="login-api" class="list-group-item list-group-item-info">Log in API</a>
      <a href="#" id="logout-api" class="list-group-item list-group-item-warning">Logout API</a>
      <a href="#" id="mybook-add-api" class="list-group-item list-group-item-success">MyBook Add API</a>
    </div>

  </div>
  <script src="../bower_components/jquery/dist/jquery.min.js"></script>
  <script src="../bower_components/bootstrap/dist/js/bootstrap.js"></script>

  <!-- API script  -->
  <script src="js/cookie.js"></script>
  <script src="js/signup.js"></script>
  <script src="js/login.js"></script>
  <script src="js/logout.js"></script>
  <script src="js/mybookadd.js"></script>

  <script>
  $('#signup-api').click(function(){
    signup('front@test.com', '12345asdf', 'front-lim');
  })
  $('#login-api').click(function(){
    login('front@test.com', '12345asdf');
  })
  $('#logout-api').click(function(){
    logout();
  })

  // 여러개의 책 저장
  $('#mybook-add-api').click(function(){
    var books = [44, 45, 46, 47]
    for (var i = 0; i < books.length; i++){
      book = books[i]
      mybookaddjs(book);
    }
  })

  // API 요청결과를 가져와서 출력하는 기능
  function login(username, password, nickname) {
    $.ajax({
      url: 'https://soobook.devlim.net/api/user/signup/',
      type: 'POST',
      dataType: 'json',
      data: {
        username: username,
        password: password,
        nickname: nickname,
      }
    })
    .done(function(response) {
      console.log(response);
      var nickname = response.nickname
      $('.signup-api-result').append(' :' + nickname);
      console.log(nickname)
    })
    .fail(function(response) {
      console.log(response)
      var response = response.status
      $('.signup-api-result').append(' :' + response);
    });
  }
  </script>

</body>
</html>
